function LeapYear(t){if(t%100==0){if(t%400==0)return!0}else if(t%4==0)return!0;return!1}function get_html_translation_table(t,e){var r={},i={},a=0,o="",n={},s={},l={},u={};if(n[0]="HTML_SPECIALCHARS",n[1]="HTML_ENTITIES",s[0]="ENT_NOQUOTES",s[2]="ENT_COMPAT",s[3]="ENT_QUOTES",l=isNaN(t)?t?t.toUpperCase():"HTML_SPECIALCHARS":n[t],u=isNaN(e)?e?e.toUpperCase():"ENT_COMPAT":s[e],"HTML_SPECIALCHARS"!==l&&"HTML_ENTITIES"!==l)throw new Error("Table: "+l+" not supported");"HTML_ENTITIES"===l&&(r[160]="&nbsp;",r[161]="&iexcl;",r[162]="&cent;",r[163]="&pound;",r[164]="&curren;",r[165]="&yen;",r[166]="&brvbar;",r[167]="&sect;",r[168]="&uml;",r[169]="&copy;",r[170]="&ordf;",r[171]="&laquo;",r[172]="&not;",r[173]="&shy;",r[174]="&reg;",r[175]="&macr;",r[176]="&deg;",r[177]="&plusmn;",r[178]="&sup2;",r[179]="&sup3;",r[180]="&acute;",r[181]="&micro;",r[182]="&para;",r[183]="&middot;",r[184]="&cedil;",r[185]="&sup1;",r[186]="&ordm;",r[187]="&raquo;",r[188]="&frac14;",r[189]="&frac12;",r[190]="&frac34;",r[191]="&iquest;",r[192]="&Agrave;",r[193]="&Aacute;",r[194]="&Acirc;",r[195]="&Atilde;",r[196]="&Auml;",r[197]="&Aring;",r[198]="&AElig;",r[199]="&Ccedil;",r[200]="&Egrave;",r[201]="&Eacute;",r[202]="&Ecirc;",r[203]="&Euml;",r[204]="&Igrave;",r[205]="&Iacute;",r[206]="&Icirc;",r[207]="&Iuml;",r[208]="&ETH;",r[209]="&Ntilde;",r[210]="&Ograve;",r[211]="&Oacute;",r[212]="&Ocirc;",r[213]="&Otilde;",r[214]="&Ouml;",r[215]="&times;",r[216]="&Oslash;",r[217]="&Ugrave;",r[218]="&Uacute;",r[219]="&Ucirc;",r[220]="&Uuml;",r[221]="&Yacute;",r[222]="&THORN;",r[223]="&szlig;",r[224]="&agrave;",r[225]="&aacute;",r[226]="&acirc;",r[227]="&atilde;",r[228]="&auml;",r[229]="&aring;",r[230]="&aelig;",r[231]="&ccedil;",r[232]="&egrave;",r[233]="&eacute;",r[234]="&ecirc;",r[235]="&euml;",r[236]="&igrave;",r[237]="&iacute;",r[238]="&icirc;",r[239]="&iuml;",r[240]="&eth;",r[241]="&ntilde;",r[242]="&ograve;",r[243]="&oacute;",r[244]="&ocirc;",r[245]="&otilde;",r[246]="&ouml;",r[247]="&divide;",r[248]="&oslash;",r[249]="&ugrave;",r[250]="&uacute;",r[251]="&ucirc;",r[252]="&uuml;",r[253]="&yacute;",r[254]="&thorn;",r[255]="&yuml;"),"ENT_NOQUOTES"!==u&&(r[34]="&quot;"),"ENT_QUOTES"===u&&(r[39]="&#39;"),r[60]="&lt;",r[62]="&gt;";for(a in r)o=String.fromCharCode(a),i[o]=r[a];return i}function htmlentities(t,e){var r={},i="",a="";if(a=t.toString(),!1===(r=this.get_html_translation_table("HTML_ENTITIES",e)))return!1;a=a.split("&").join("&amp;"),r["'"]="&#039;";for(i in r)a=a.split(i).join(r[i]);return a}function htmlspecialchars(t,e){var r={},i="",a="";if(a=t.toString(),!1===(r=this.get_html_translation_table("HTML_SPECIALCHARS",e)))return!1;a=a.split("&").join("&amp;");for(i in r)a=a.split(i).join(r[i]);return a}function number_format(t,e,r,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var a=isFinite(+t)?+t:0,o=isFinite(+e)?e:0,n="undefined"==typeof i?",":i,s="undefined"==typeof r?".":r,l="",u=function(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r};return l=(o<0?""+a:o?u(a,o):""+Math.round(a)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,n)),(l[1]||"").length<o&&(l[1]=l[1]||"",l[1]+=new Array(o-l[1].length+1).join("0")),l.join(s)}EditableGrid.prototype._convertOptions=function(t){if(null!==t&&!(t instanceof Array)&&"object"==typeof t){var e=[];for(var r in t)"object"==typeof t[r]?e.push({label:r,values:this._convertOptions(t[r])}):e.push({value:r,label:t[r]});t=e}return t},EditableGrid.prototype.setCookie=function(t,e,r){var i=new Date;i.setDate(i.getDate()+r);var a=escape(e)+(null==r?"":"; expires="+i.toUTCString());document.cookie=t+"="+a},EditableGrid.prototype.getCookie=function(t){for(var e=document.cookie.split(";"),r=0;r<e.length;r++){var i=e[r].substr(0,e[r].indexOf("=")),a=e[r].substr(e[r].indexOf("=")+1);if(i=i.replace(/^\s+|\s+$/g,""),i==t)return unescape(a)}return null},EditableGrid.prototype.has_local_storage=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},EditableGrid.prototype._localset=function(t,e){this.has_local_storage()?localStorage.setItem(t,e):this.setCookie(t,e,null)},EditableGrid.prototype._localunset=function(t){this.has_local_storage()?localStorage.removeItem(t):this.setCookie(t,null,null)},EditableGrid.prototype._localget=function(t){return this.has_local_storage()?localStorage.getItem(t):this.getCookie(t)},EditableGrid.prototype._localisset=function(t){return this.has_local_storage()?null!==localStorage.getItem(t)&&"undefined"!=localStorage.getItem(t):null!==this.getCookie(t)},EditableGrid.prototype.localset=function(t,e){if(this.enableStore)return this._localset(this.name+"_"+t,e)},EditableGrid.prototype.localunset=function(t){if(this.enableStore)return this._localunset(this.name+"_"+t,value)},EditableGrid.prototype.localget=function(t){return this.enableStore?this._localget(this.name+"_"+t):null},EditableGrid.prototype.localisset=function(t){return!!this.enableStore&&null!==this._localget(this.name+"_"+t)},EditableGrid.prototype.unsort=function(t,e){return aa=isNaN(t[2])?0:parseFloat(t[2]),bb=isNaN(e[2])?0:parseFloat(e[2]),aa-bb},EditableGrid.prototype.sort_stable=function(t,e){return function(r,i){var a=e?t(i,r):t(r,i);return 0!=a?a:EditableGrid.prototype.unsort(r,i)}},EditableGrid.prototype.sort_numeric=function(t,e){return aa=isNaN(parseFloat(t[0]))?0:parseFloat(t[0]),bb=isNaN(parseFloat(e[0]))?0:parseFloat(e[0]),aa-bb},EditableGrid.prototype.sort_boolean=function(t,e){return aa=t[0]&&"false"!=t[0]?1:0,bb=e[0]&&"false"!=e[0]?1:0,aa-bb},EditableGrid.prototype.sort_alpha=function(t,e){return t[0]||e[0]?t[0]&&!e[0]?1:!t[0]&&e[0]?-1:t[0].toLowerCase()==e[0].toLowerCase()?0:t[0].toLowerCase().localeCompare(e[0].toLowerCase()):0},EditableGrid.prototype.sort_date=function(t,e){return date=EditableGrid.prototype.checkDate(t[0]),aa="object"==typeof date?date.sortDate:0,date=EditableGrid.prototype.checkDate(e[0]),bb="object"==typeof date?date.sortDate:0,aa-bb},EditableGrid.prototype.getStyle=function(t,e,r){return r=r||e,t.currentStyle?t.currentStyle[e]:window.getComputedStyle?document.defaultView.getComputedStyle(t,null).getPropertyValue(r):t.style[e]},EditableGrid.prototype.isStatic=function(t){var e=this.getStyle(t,"position");return!e||"static"==e},EditableGrid.prototype.verticalAlign=function(t){return this.getStyle(t,"verticalAlign","vertical-align")},EditableGrid.prototype.paddingLeft=function(t){var e=parseInt(this.getStyle(t,"paddingLeft","padding-left"));return isNaN(e)?0:Math.max(0,e)},EditableGrid.prototype.paddingRight=function(t){var e=parseInt(this.getStyle(t,"paddingRight","padding-right"));return isNaN(e)?0:Math.max(0,e)},EditableGrid.prototype.paddingTop=function(t){var e=parseInt(this.getStyle(t,"paddingTop","padding-top"));return isNaN(e)?0:Math.max(0,e)},EditableGrid.prototype.paddingBottom=function(t){var e=parseInt(this.getStyle(t,"paddingBottom","padding-bottom"));return isNaN(e)?0:Math.max(0,e)},EditableGrid.prototype.borderLeft=function(t){var e=parseInt(this.getStyle(t,"borderRightWidth","border-right-width")),r=parseInt(this.getStyle(t,"borderLeftWidth","border-left-width"));return e=isNaN(e)?0:e,r=isNaN(r)?0:r,Math.max(e,r)},EditableGrid.prototype.borderRight=function(t){return this.borderLeft(t)},EditableGrid.prototype.borderTop=function(t){var e=parseInt(this.getStyle(t,"borderTopWidth","border-top-width")),r=parseInt(this.getStyle(t,"borderBottomWidth","border-bottom-width"));return e=isNaN(e)?0:e,r=isNaN(r)?0:r,Math.max(e,r)},EditableGrid.prototype.borderBottom=function(t){return this.borderTop(t)},EditableGrid.prototype.autoWidth=function(t){return t.offsetWidth-this.paddingLeft(t)-this.paddingRight(t)-this.borderLeft(t)-this.borderRight(t)},EditableGrid.prototype.autoHeight=function(t){return t.offsetHeight-this.paddingTop(t)-this.paddingBottom(t)-this.borderTop(t)-this.borderBottom(t)},EditableGrid.prototype.detectDir=function(){for(var t=location.href,e=document.getElementsByTagName("base"),r=0;r<e.length;r++)e[r].href&&(t=e[r].href);e=document.getElementsByTagName("script");for(var r=0;r<e.length;r++)if(e[r].src&&/(^|\/)editablegrid[^\/]*\.js([?#].*)?$/i.test(e[r].src)){var i=new URI(e[r].src),a=i.toAbsolute(t);return a.path=a.path.replace(/[^\/]+$/,""),a.path=a.path.replace(/\/$/,""),delete a.query,delete a.fragment,a.toString()}return!1},EditableGrid.prototype.isSame=function(t,e){return t===e||(!("number"!=typeof t||!isNaN(t)||"number"!=typeof e||!isNaN(e))||(""===t&&null===e||""===e&&null===t))},EditableGrid.prototype.strip=function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},EditableGrid.prototype.hasClassName=function(t,e){return t.className.length>0&&(t.className==e||new RegExp("(^|\\s)"+e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"(\\s|$)").test(t.className))},EditableGrid.prototype.addClassName=function(t,e){this.hasClassName(t,e)||(t.className+=(t.className?" ":"")+e)},EditableGrid.prototype.removeClassName=function(t,e){t.className=this.strip(t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," "))},String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")},String.prototype.contains=function(t){return this.match(t)==t},String.prototype.startsWith=function(t){return this.match("^"+t)==t},String.prototype.endsWith=function(t){return this.match(t+"$")==t},EditableGrid.prototype.checkDate=function(t,e){e=e||this.dateFormat,e=e||"EU";var r,a,o,n,s,l,u,p,c=!1,h=new Array("-"," ","/","."),d=this.shortMonthNames;if(d=d||["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],!t||t.length<1)return 0;for(p=0;p<h.length;p++)if(t.indexOf(h[p])!=-1){if(r=t.split(h[p]),3!=r.length)return 1;a=r[0],o=r[1],n=r[2],c=!0}if(0==c){if(t.length<=5)return 1;a=t.substr(0,2),o=t.substr(2,2),n=t.substr(4)}if("US"==e&&(strTemp=a,a=o,o=strTemp),s=parseInt(a,10),isNaN(s))return 2;if(l=parseInt(o,10),isNaN(l)){for(i=0;i<12;i++)o.toUpperCase()==d[i].toUpperCase()&&(l=i+1,o=d[i],i=12);if(isNaN(l))return 3}if(l>12||l<1)return 5;if(u=parseInt(n,10),isNaN(u))return 4;if(u<70&&(u=2e3+u,n=""+u),u<100&&(u=1900+u,n=""+u),u<1900||u>2100)return 11;if((1==l||3==l||5==l||7==l||8==l||10==l||12==l)&&(s>31||s<1))return 6;if((4==l||6==l||9==l||11==l)&&(s>30||s<1))return 7;if(2==l){if(s<1)return 8;if(1==LeapYear(u)){if(s>29)return 9}else if(s>28)return 10}return{formattedDate:"US"==e?d[l-1]+" "+s+" "+n:s+" "+d[l-1]+" "+n,sortDate:Date.parse(l+"/"+s+"/"+u),dbDate:u+"-"+l+"-"+s}},URI=function(t){function e(t){for(var e="";t;)if("../"==t.substr(0,3)||"./"==t.substr(0,2))t=t.replace(/^\.+/,"").substr(1);else if("/./"==t.substr(0,3)||"/."==t)t="/"+t.substr(3);else if("/../"==t.substr(0,4)||"/.."==t)t="/"+t.substr(4),e=e.replace(/\/?[^\/]*$/,"");else if("."==t||".."==t)t="";else{var r=t.match(/^\/?[^\/]*/)[0];t=t.substr(r.length),e+=r}return e}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(t){var e=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=e[3]?e[2]:null,this.authority=e[5]?e[6]:null,this.path=e[7],this.query=e[9]?e[10]:null,this.fragment=e[12]?e[13]:null,this},this.toString=function(){var t="";return null!=this.scheme&&(t=t+this.scheme+":"),null!=this.authority&&(t=t+"//"+this.authority),null!=this.path&&(t+=this.path),null!=this.query&&(t=t+"?"+this.query),null!=this.fragment&&(t=t+"#"+this.fragment),t},this.toAbsolute=function(t){var t=new URI(t),r=this,i=new URI;return null!=t.scheme&&(null!=r.scheme&&r.scheme.toLowerCase()==t.scheme.toLowerCase()&&(r.scheme=null),null!=r.scheme?(i.scheme=r.scheme,i.authority=r.authority,i.path=e(r.path),i.query=r.query):(null!=r.authority?(i.authority=r.authority,i.path=e(r.path),i.query=r.query):(""==r.path?(i.path=t.path,null!=r.query?i.query=r.query:i.query=t.query):("/"==r.path.substr(0,1)?i.path=e(r.path):(null!=t.authority&&""==t.path?i.path="/"+r.path:i.path=t.path.replace(/[^\/]+$/,"")+r.path,i.path=e(i.path)),i.query=r.query),i.authority=t.authority),i.scheme=t.scheme),i.fragment=r.fragment,i)},t&&this.parse(t)};